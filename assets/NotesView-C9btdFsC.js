import{u as mt,a as gt,b as ht,p as Ve,c as bt,d as pt,e as xt,f as yt,r as He,g as kt,h as St,i as Ct,j as wt,Q as Mt}from"./QDialog-B8kMnmg2.js";import{Q as Tt,a as qt,N as $t}from"./Note-DInD2sjK.js";import{u as Ue,g as ie,a as Xe,r as L,c as r,i as Lt,b as ye,T as Bt,o as se,d as Q,p as Ye,h as $,e as _t,f as Le,w as W,s as Ge,j as ze,k as Et,l as Ae,n as Nt,m as Ft,q as Pt,t as Vt,v as we,x as Ht,y as zt,z as At,A as Rt,B as Wt,C as Dt,D as It,E as Ot,F as Qt,G as jt,H as Kt,I as Ut,J as Xt,K as Yt,L as j,M as V,N as Me,O as Te,P as qe,Q as Je,R as ae,S as Ze,U as Gt,_ as Jt,V as Zt,W as el,X as tl,Y as q,Z as P,$ as ke,a0 as Re}from"./index-CeEn8-o1.js";import{Q as ll}from"./QSpinnerTail-C9xzE2HJ.js";const We="q-slider__marker-labels",nl=t=>({value:t}),al=({marker:t})=>$("div",{key:t.value,style:t.style,class:t.classes},t.label),et=[34,37,40,33,39,38],ol={...Ue,...mt,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},rl=["pan","update:modelValue","change"];function il({updateValue:t,updatePosition:a,getDragging:o,formAttrs:l}){const{props:e,emit:h,slots:i,proxy:{$q:f}}=ie(),y=Xe(e,f),d=gt(l),v=L(!1),k=L(!1),S=L(!1),s=L(!1),u=r(()=>e.vertical===!0?"--v":"--h"),c=r(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),m=r(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(f.lang.rtl===!0)),p=r(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),M=r(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),x=r(()=>e.disable!==!0&&e.readonly!==!0&&p.value<M.value),B=r(()=>{if(e.step===0)return g=>g;const n=(String(e.step).trim().split(".")[1]||"").length;return g=>parseFloat(g.toFixed(n))}),C=r(()=>e.step===0?1:e.step),H=r(()=>x.value===!0?e.tabindex||0:-1),_=r(()=>e.max-e.min),F=r(()=>M.value-p.value),N=r(()=>Z(p.value)),I=r(()=>Z(M.value)),A=r(()=>e.vertical===!0?m.value===!0?"bottom":"top":m.value===!0?"right":"left"),ee=r(()=>e.vertical===!0?"height":"width"),K=r(()=>e.vertical===!0?"width":"height"),U=r(()=>e.vertical===!0?"vertical":"horizontal"),ue=r(()=>{const n={role:"slider","aria-valuemin":p.value,"aria-valuemax":M.value,"aria-orientation":U.value,"data-step":e.step};return e.disable===!0?n["aria-disabled"]="true":e.readonly===!0&&(n["aria-readonly"]="true"),n}),ce=r(()=>`q-slider q-slider${u.value} q-slider--${v.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(x.value===!0?" q-slider--editable":""))+(S.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(y.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+u.value:""));function O(n){const g="q-slider__"+n;return`${g} ${g}${u.value} ${g}${u.value}${c.value}`}function X(n){const g="q-slider__"+n;return`${g} ${g}${u.value}`}const Y=r(()=>{const n=e.selectionColor||e.color;return"q-slider__selection absolute"+(n!==void 0?` text-${n}`:"")}),de=r(()=>X("markers")+" absolute overflow-hidden"),ve=r(()=>X("track-container")),te=r(()=>O("pin")),le=r(()=>O("label")),fe=r(()=>O("text-container")),ne=r(()=>O("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),G=r(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),R=r(()=>{const n={[K.value]:e.trackSize};return e.trackImg!==void 0&&(n.backgroundImage=`url(${e.trackImg}) !important`),n}),me=r(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),b=r(()=>{const n=I.value-N.value,g={[A.value]:`${100*N.value}%`,[ee.value]:n===0?"2px":`${100*n}%`};return e.innerTrackImg!==void 0&&(g.backgroundImage=`url(${e.innerTrackImg}) !important`),g});function J(n){const{min:g,max:w,step:T}=e;let E=g+n*(w-g);if(T>0){const z=(E-p.value)%T;E+=(Math.abs(z)>=T/2?(z<0?-1:1)*T:0)-z}return E=B.value(E),Q(E,p.value,M.value)}function Z(n){return _.value===0?0:(n-e.min)/_.value}function ge(n,g){const w=Ye(n),T=e.vertical===!0?Q((w.top-g.top)/g.height,0,1):Q((w.left-g.left)/g.width,0,1);return Q(m.value===!0?1-T:T,N.value,I.value)}const Be=r(()=>Lt(e.markers)===!0?e.markers:C.value),_e=r(()=>{const n=[],g=Be.value,w=e.max;let T=e.min;do n.push(T),T+=g;while(T<w);return n.push(w),n}),Ee=r(()=>{const n=` ${We}${u.value}-`;return We+`${n}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${n}${m.value===!0?"rtl":"ltr"}`}),he=r(()=>e.markerLabels===!1?null:nt(e.markerLabels).map((n,g)=>({index:g,value:n.value,label:n.label||n.value,classes:Ee.value+(n.classes!==void 0?" "+n.classes:""),style:{...Fe(n.value),...n.style||{}}}))),Ne=r(()=>({markerList:he.value,markerMap:at.value,classes:Ee.value,getStyle:Fe})),lt=r(()=>{const n=F.value===0?"2px":100*Be.value/F.value;return{...b.value,backgroundSize:e.vertical===!0?`2px ${n}%`:`${n}% 2px`}});function nt(n){if(n===!1)return null;if(n===!0)return _e.value.map(nl);if(typeof n=="function")return _e.value.map(w=>{const T=n(w);return ye(T)===!0?{...T,value:w}:{value:w,label:T}});const g=({value:w})=>w>=e.min&&w<=e.max;return Array.isArray(n)===!0?n.map(w=>ye(w)===!0?w:{value:w}).filter(g):Object.keys(n).map(w=>{const T=n[w],E=Number(w);return ye(T)===!0?{...T,value:E}:{value:E,label:T}}).filter(g)}function Fe(n){return{[A.value]:`${100*(n-e.min)/_.value}%`}}const at=r(()=>{if(e.markerLabels===!1)return null;const n={};return he.value.forEach(g=>{n[g.value]=g}),n});function ot(){if(i["marker-label-group"]!==void 0)return i["marker-label-group"](Ne.value);const n=i["marker-label"]||al;return he.value.map(g=>n({marker:g,...Ne.value}))}const rt=r(()=>[[Bt,it,void 0,{[U.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function it(n){n.isFinal===!0?(s.value!==void 0&&(a(n.evt),n.touch===!0&&t(!0),s.value=void 0,h("pan","end")),v.value=!1,S.value=!1):n.isFirst===!0?(s.value=o(n.evt),a(n.evt),t(),v.value=!0,h("pan","start")):(a(n.evt),t())}function Pe(){S.value=!1}function st(n){a(n,o(n)),t(),k.value=!0,v.value=!0,document.addEventListener("mouseup",be,!0)}function be(){k.value=!1,v.value=!1,t(!0),Pe(),document.removeEventListener("mouseup",be,!0)}function ut(n){a(n,o(n)),t(!0)}function ct(n){et.includes(n.keyCode)&&t(!0)}function dt(n){if(e.vertical===!0)return null;const g=f.lang.rtl!==e.reverse?1-n:n;return{transform:`translateX(calc(${2*g-1} * ${e.thumbSize} / 2 + ${50-100*g}%))`}}function vt(n){const g=r(()=>k.value===!1&&(S.value===n.focusValue||S.value==="both")?" q-slider--focus":""),w=r(()=>`q-slider__thumb q-slider__thumb${u.value} q-slider__thumb${u.value}-${m.value===!0?"rtl":"ltr"} absolute non-selectable`+g.value+(n.thumbColor.value!==void 0?` text-${n.thumbColor.value}`:"")),T=r(()=>({width:e.thumbSize,height:e.thumbSize,[A.value]:`${100*n.ratio.value}%`,zIndex:S.value===n.focusValue?2:void 0})),E=r(()=>n.labelColor.value!==void 0?` text-${n.labelColor.value}`:""),z=r(()=>dt(n.ratio.value)),pe=r(()=>"q-slider__text"+(n.labelTextColor.value!==void 0?` text-${n.labelTextColor.value}`:""));return()=>{const xe=[$("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[$("path",{d:e.thumbPath})]),$("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(xe.push($("div",{class:te.value+" absolute fit no-pointer-events"+E.value},[$("div",{class:le.value,style:{minWidth:e.thumbSize}},[$("div",{class:fe.value,style:z.value},[$("span",{class:pe.value},n.label.value)])])])),e.name!==void 0&&e.disable!==!0&&d(xe,"push")),$("div",{class:w.value,style:T.value,...n.getNodeData()},xe)}}function ft(n,g,w,T){const E=[];e.innerTrackColor!=="transparent"&&E.push($("div",{key:"inner",class:me.value,style:b.value})),e.selectionColor!=="transparent"&&E.push($("div",{key:"selection",class:Y.value,style:n.value})),e.markers!==!1&&E.push($("div",{key:"marker",class:de.value,style:lt.value})),T(E);const z=[_t("div",{key:"trackC",class:ve.value,tabindex:g.value,...w.value},[$("div",{class:G.value,style:R.value},E)],"slide",x.value,()=>rt.value)];if(e.markerLabels!==!1){const pe=e.switchMarkerLabelsSide===!0?"unshift":"push";z[pe]($("div",{key:"markerL",class:ne.value},ot()))}return z}return se(()=>{document.removeEventListener("mouseup",be,!0)}),{state:{active:v,focus:S,preventFocus:k,dragging:s,editable:x,classes:ce,tabindex:H,attributes:ue,roundValueFn:B,keyStep:C,trackLen:_,innerMin:p,innerMinRatio:N,innerMax:M,innerMaxRatio:I,positionProp:A,sizeProp:ee,isReversed:m},methods:{onActivate:st,onMobileClick:ut,onBlur:Pe,onKeyup:ct,getContent:ft,getThumbRenderFn:vt,convertRatioToModel:J,convertModelToRatio:Z,getDraggingRatio:ge}}}const sl=()=>({}),ul=Le({name:"QSlider",props:{...ol,modelValue:{required:!0,default:null,validator:t=>typeof t=="number"||t===null},labelValue:[String,Number]},emits:rl,setup(t,{emit:a}){const{proxy:{$q:o}}=ie(),{state:l,methods:e}=il({updateValue:u,updatePosition:m,getDragging:c,formAttrs:ht(t)}),h=L(null),i=L(0),f=L(0);function y(){f.value=t.modelValue===null?l.innerMin.value:Q(t.modelValue,l.innerMin.value,l.innerMax.value)}W(()=>`${t.modelValue}|${l.innerMin.value}|${l.innerMax.value}`,y),y();const d=r(()=>e.convertModelToRatio(f.value)),v=r(()=>l.active.value===!0?i.value:d.value),k=r(()=>{const x={[l.positionProp.value]:`${100*l.innerMinRatio.value}%`,[l.sizeProp.value]:`${100*(v.value-l.innerMinRatio.value)}%`};return t.selectionImg!==void 0&&(x.backgroundImage=`url(${t.selectionImg}) !important`),x}),S=e.getThumbRenderFn({focusValue:!0,getNodeData:sl,ratio:v,label:r(()=>t.labelValue!==void 0?t.labelValue:f.value),thumbColor:r(()=>t.thumbColor||t.color),labelColor:r(()=>t.labelColor),labelTextColor:r(()=>t.labelTextColor)}),s=r(()=>l.editable.value!==!0?{}:o.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:p,onBlur:e.onBlur,onKeydown:M,onKeyup:e.onKeyup});function u(x){f.value!==t.modelValue&&a("update:modelValue",f.value),x===!0&&a("change",f.value)}function c(){return h.value.getBoundingClientRect()}function m(x,B=l.dragging.value){const C=e.getDraggingRatio(x,B);f.value=e.convertRatioToModel(C),i.value=t.snap!==!0||t.step===0?C:e.convertModelToRatio(f.value)}function p(){l.focus.value=!0}function M(x){if(et.includes(x.keyCode)===!1)return;Ge(x);const B=([34,33].includes(x.keyCode)?10:1)*l.keyStep.value,C=([34,37,40].includes(x.keyCode)?-1:1)*(l.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*B;f.value=Q(l.roundValueFn.value(f.value+C),l.innerMin.value,l.innerMax.value),u()}return()=>{const x=e.getContent(k,l.tabindex,s,B=>{B.push(S())});return $("div",{ref:h,class:l.classes.value+(t.modelValue===null?" q-slider--no-value":""),...l.attributes.value,"aria-valuenow":t.modelValue},x)}}}),cl={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},dl={...cl,contextMenu:Boolean};function vl({showing:t,avoidEmit:a,configureAnchorEl:o}){const{props:l,proxy:e,emit:h}=ie(),i=L(null);let f=null;function y(s){return i.value===null?!1:s===void 0||s.touches===void 0||s.touches.length<=1}const d={};o===void 0&&(Object.assign(d,{hide(s){e.hide(s)},toggle(s){e.toggle(s),s.qAnchorHandled=!0},toggleKey(s){Ft(s,13)===!0&&d.toggle(s)},contextClick(s){e.hide(s),ze(s),Nt(()=>{e.show(s),s.qAnchorHandled=!0})},prevent:ze,mobileTouch(s){if(d.mobileCleanup(s),y(s)!==!0)return;e.hide(s),i.value.classList.add("non-selectable");const u=s.target;Ae(d,"anchor",[[u,"touchmove","mobileCleanup","passive"],[u,"touchend","mobileCleanup","passive"],[u,"touchcancel","mobileCleanup","passive"],[i.value,"contextmenu","prevent","notPassive"]]),f=setTimeout(()=>{f=null,e.show(s),s.qAnchorHandled=!0},300)},mobileCleanup(s){i.value.classList.remove("non-selectable"),f!==null&&(clearTimeout(f),f=null),t.value===!0&&s!==void 0&&Et()}}),o=function(s=l.contextMenu){if(l.noParentEvent===!0||i.value===null)return;let u;s===!0?e.$q.platform.is.mobile===!0?u=[[i.value,"touchstart","mobileTouch","passive"]]:u=[[i.value,"mousedown","hide","passive"],[i.value,"contextmenu","contextClick","notPassive"]]:u=[[i.value,"click","toggle","passive"],[i.value,"keyup","toggleKey","passive"]],Ae(d,"anchor",u)});function v(){Vt(d,"anchor")}function k(s){for(i.value=s;i.value.classList.contains("q-anchor--skip");)i.value=i.value.parentNode;o()}function S(){if(l.target===!1||l.target===""||e.$el.parentNode===null)i.value=null;else if(l.target===!0)k(e.$el.parentNode);else{let s=l.target;if(typeof l.target=="string")try{s=document.querySelector(l.target)}catch{s=void 0}s!=null?(i.value=s.$el||s,o()):(i.value=null,console.error(`Anchor: target "${l.target}" not found`))}}return W(()=>l.contextMenu,s=>{i.value!==null&&(v(),o(s))}),W(()=>l.target,()=>{i.value!==null&&v(),S()}),W(()=>l.noParentEvent,s=>{i.value!==null&&(s===!0?v():o())}),Pt(()=>{S(),a!==!0&&l.modelValue===!0&&i.value===null&&h("update:modelValue",!1)}),se(()=>{f!==null&&clearTimeout(f),v()}),{anchorEl:i,canShow:y,anchorEvents:d}}function fl(t,a){const o=L(null);let l;function e(f,y){const d=`${y!==void 0?"add":"remove"}EventListener`,v=y!==void 0?y:l;f!==window&&f[d]("scroll",v,we.passive),window[d]("scroll",v,we.passive),l=y}function h(){o.value!==null&&(e(o.value),o.value=null)}const i=W(()=>t.noParentEvent,()=>{o.value!==null&&(h(),a())});return se(i),{localScrollTarget:o,unconfigureScrollTarget:h,changeScrollEvent:e}}const{notPassiveCapture:oe}=we,D=[];function re(t){const a=t.target;if(a===void 0||a.nodeType===8||a.classList.contains("no-pointer-events")===!0)return;let o=Ve.length-1;for(;o>=0;){const l=Ve[o].$;if(l.type.name==="QTooltip"){o--;continue}if(l.type.name!=="QDialog")break;if(l.props.seamless!==!0)return;o--}for(let l=D.length-1;l>=0;l--){const e=D[l];if((e.anchorEl.value===null||e.anchorEl.value.contains(a)===!1)&&(a===document.body||e.innerRef.value!==null&&e.innerRef.value.contains(a)===!1))t.qClickOutside=!0,e.onClickOutside(t);else return}}function ml(t){D.push(t),D.length===1&&(document.addEventListener("mousedown",re,oe),document.addEventListener("touchstart",re,oe))}function De(t){const a=D.findIndex(o=>o===t);a!==-1&&(D.splice(a,1),D.length===0&&(document.removeEventListener("mousedown",re,oe),document.removeEventListener("touchstart",re,oe)))}let Ie,Oe;function Qe(t){const a=t.split(" ");return a.length!==2?!1:["top","center","bottom"].includes(a[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(a[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function gl(t){return t?!(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number"):!0}const $e={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(t=>{$e[`${t}#ltr`]=t,$e[`${t}#rtl`]=t});function je(t,a){const o=t.split(" ");return{vertical:o[0],horizontal:$e[`${o[1]}#${a===!0?"rtl":"ltr"}`]}}function hl(t,a){let{top:o,left:l,right:e,bottom:h,width:i,height:f}=t.getBoundingClientRect();return a!==void 0&&(o-=a[1],l-=a[0],h+=a[1],e+=a[0],i+=a[0],f+=a[1]),{top:o,bottom:h,height:f,left:l,right:e,width:i,middle:l+(e-l)/2,center:o+(h-o)/2}}function bl(t,a,o){let{top:l,left:e}=t.getBoundingClientRect();return l+=a.top,e+=a.left,o!==void 0&&(l+=o[1],e+=o[0]),{top:l,bottom:l+1,height:1,left:e,right:e+1,width:1,middle:e,center:l}}function pl(t,a){return{top:0,center:a/2,bottom:a,left:0,middle:t/2,right:t}}function Ke(t,a,o,l){return{top:t[o.vertical]-a[l.vertical],left:t[o.horizontal]-a[l.horizontal]}}function tt(t,a=0){if(t.targetEl===null||t.anchorEl===null||a>5)return;if(t.targetEl.offsetHeight===0||t.targetEl.offsetWidth===0){setTimeout(()=>{tt(t,a+1)},10);return}const{targetEl:o,offset:l,anchorEl:e,anchorOrigin:h,selfOrigin:i,absoluteOffset:f,fit:y,cover:d,maxHeight:v,maxWidth:k}=t;if(Ht.is.ios===!0&&window.visualViewport!==void 0){const H=document.body.style,{offsetLeft:_,offsetTop:F}=window.visualViewport;_!==Ie&&(H.setProperty("--q-pe-left",_+"px"),Ie=_),F!==Oe&&(H.setProperty("--q-pe-top",F+"px"),Oe=F)}const{scrollLeft:S,scrollTop:s}=o,u=f===void 0?hl(e,d===!0?[0,0]:l):bl(e,f,l);Object.assign(o.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:k,maxHeight:v,visibility:"visible"});const{offsetWidth:c,offsetHeight:m}=o,{elWidth:p,elHeight:M}=y===!0||d===!0?{elWidth:Math.max(u.width,c),elHeight:d===!0?Math.max(u.height,m):m}:{elWidth:c,elHeight:m};let x={maxWidth:k,maxHeight:v};(y===!0||d===!0)&&(x.minWidth=u.width+"px",d===!0&&(x.minHeight=u.height+"px")),Object.assign(o.style,x);const B=pl(p,M);let C=Ke(u,B,h,i);if(f===void 0||l===void 0)Se(C,u,B,h,i);else{const{top:H,left:_}=C;Se(C,u,B,h,i);let F=!1;if(C.top!==H){F=!0;const N=2*l[1];u.center=u.top-=N,u.bottom-=N+2}if(C.left!==_){F=!0;const N=2*l[0];u.middle=u.left-=N,u.right-=N+2}F===!0&&(C=Ke(u,B,h,i),Se(C,u,B,h,i))}x={top:C.top+"px",left:C.left+"px"},C.maxHeight!==void 0&&(x.maxHeight=C.maxHeight+"px",u.height>C.maxHeight&&(x.minHeight=x.maxHeight)),C.maxWidth!==void 0&&(x.maxWidth=C.maxWidth+"px",u.width>C.maxWidth&&(x.minWidth=x.maxWidth)),Object.assign(o.style,x),o.scrollTop!==s&&(o.scrollTop=s),o.scrollLeft!==S&&(o.scrollLeft=S)}function Se(t,a,o,l,e){const h=o.bottom,i=o.right,f=zt(),y=window.innerHeight-f,d=document.body.clientWidth;if(t.top<0||t.top+h>y)if(e.vertical==="center")t.top=a[l.vertical]>y/2?Math.max(0,y-h):0,t.maxHeight=Math.min(h,y);else if(a[l.vertical]>y/2){const v=Math.min(y,l.vertical==="center"?a.center:l.vertical===e.vertical?a.bottom:a.top);t.maxHeight=Math.min(h,v),t.top=Math.max(0,v-h)}else t.top=Math.max(0,l.vertical==="center"?a.center:l.vertical===e.vertical?a.top:a.bottom),t.maxHeight=Math.min(h,y-t.top);if(t.left<0||t.left+i>d)if(t.maxWidth=Math.min(i,d),e.horizontal==="middle")t.left=a[l.horizontal]>d/2?Math.max(0,d-i):0;else if(a[l.horizontal]>d/2){const v=Math.min(d,l.horizontal==="middle"?a.middle:l.horizontal===e.horizontal?a.right:a.left);t.maxWidth=Math.min(i,v),t.left=Math.max(0,v-t.maxWidth)}else t.left=Math.max(0,l.horizontal==="middle"?a.middle:l.horizontal===e.horizontal?a.left:a.right),t.maxWidth=Math.min(i,d-t.left)}const xl=Le({name:"QMenu",inheritAttrs:!1,props:{...dl,...Wt,...Ue,...bt,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Qe},self:{type:String,validator:Qe},offset:{type:Array,validator:gl},scrollTarget:Rt,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...At,"click","escapeKey"],setup(t,{slots:a,emit:o,attrs:l}){let e=null,h,i,f;const y=ie(),{proxy:d}=y,{$q:v}=d,k=L(null),S=L(!1),s=r(()=>t.persistent!==!0&&t.noRouteDismiss!==!0),u=Xe(t,v),{registerTick:c,removeTick:m}=Dt(),{registerTimeout:p}=It(),{transitionProps:M,transitionStyle:x}=pt(t),{localScrollTarget:B,changeScrollEvent:C,unconfigureScrollTarget:H}=fl(t,le),{anchorEl:_,canShow:F}=vl({showing:S}),{hide:N}=Ot({showing:S,canShow:F,handleShow:de,handleHide:ve,hideOnRouteChange:s,processOnMount:!0}),{showPortal:I,hidePortal:A,renderPortal:ee}=xt(y,k,me,"menu"),K={anchorEl:_,innerRef:k,onClickOutside(b){if(t.persistent!==!0&&S.value===!0)return N(b),(b.type==="touchstart"||b.target.classList.contains("q-dialog__backdrop"))&&Ge(b),!0}},U=r(()=>je(t.anchor||(t.cover===!0?"center middle":"bottom start"),v.lang.rtl)),ue=r(()=>t.cover===!0?U.value:je(t.self||"top start",v.lang.rtl)),ce=r(()=>(t.square===!0?" q-menu--square":"")+(u.value===!0?" q-menu--dark q-dark":"")),O=r(()=>t.autoClose===!0?{onClick:fe}:{}),X=r(()=>S.value===!0&&t.persistent!==!0);W(X,b=>{b===!0?(yt(G),ml(K)):(He(G),De(K))});function Y(){wt(()=>{let b=k.value;b&&b.contains(document.activeElement)!==!0&&(b=b.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||b.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||b.querySelector("[autofocus], [data-autofocus]")||b,b.focus({preventScroll:!0}))})}function de(b){if(e=t.noRefocus===!1?document.activeElement:null,kt(ne),I(),le(),h=void 0,b!==void 0&&(t.touchPosition||t.contextMenu)){const J=Ye(b);if(J.left!==void 0){const{top:Z,left:ge}=_.value.getBoundingClientRect();h={left:J.left-ge,top:J.top-Z}}}i===void 0&&(i=W(()=>v.screen.width+"|"+v.screen.height+"|"+t.self+"|"+t.anchor+"|"+v.lang.rtl,R)),t.noFocus!==!0&&document.activeElement.blur(),c(()=>{R(),t.noFocus!==!0&&Y()}),p(()=>{v.platform.is.ios===!0&&(f=t.autoClose,k.value.click()),R(),I(!0),o("show",b)},t.transitionDuration)}function ve(b){m(),A(),te(!0),e!==null&&(b===void 0||b.qClickOutside!==!0)&&((((b==null?void 0:b.type.indexOf("key"))===0?e.closest('[tabindex]:not([tabindex^="-"])'):void 0)||e).focus(),e=null),p(()=>{A(!0),o("hide",b)},t.transitionDuration)}function te(b){h=void 0,i!==void 0&&(i(),i=void 0),(b===!0||S.value===!0)&&(St(ne),H(),De(K),He(G)),b!==!0&&(e=null)}function le(){(_.value!==null||t.scrollTarget!==void 0)&&(B.value=Qt(_.value,t.scrollTarget),C(B.value,R))}function fe(b){f!==!0?(Ct(d,b),o("click",b)):f=!1}function ne(b){X.value===!0&&t.noFocus!==!0&&Ut(k.value,b.target)!==!0&&Y()}function G(b){t.noEscDismiss!==!0&&(o("escapeKey"),N(b))}function R(){tt({targetEl:k.value,offset:t.offset,anchorEl:_.value,anchorOrigin:U.value,selfOrigin:ue.value,absoluteOffset:h,fit:t.fit,cover:t.cover,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function me(){return $(Kt,M.value,()=>S.value===!0?$("div",{role:"menu",...l,ref:k,tabindex:-1,class:["q-menu q-position-engine scroll"+ce.value,l.class],style:[l.style,x.value],...O.value},jt(a.default)):null)}return se(te),Object.assign(d,{focus:Y,updatePosition:R}),ee}}),yl='<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',kl=Le({name:"QSpinnerDots",props:Xt,setup(t){const{cSize:a,classes:o}=Yt(t);return()=>$("svg",{class:o.value,fill:"currentColor",width:a.value,height:a.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:yl})}}),Ce={__name:"SettingOptions",props:{isOnlyOneSelected:{type:Boolean,default:!1},options:{type:Array,default:[]},settings:{type:Array,default:[]}},emits:["update:optionSettings"],setup(t,{emit:a}){const o=t,l=r(()=>o.settings.length!==0?o.settings:h(o.options)),e=a;function h(d){return d.map(v=>({name:v,label:v,value:!1}))}function i(d){return d.map(v=>({...v,value:!1}))}function f(d){const v=i(l.value);return[...v.slice(0,d),{...l.value[d],value:!l.value[d].value},...v.slice(d+1)]}function y(d){if(o.isOnlyOneSelected)return e("update:optionSettings",f(d));const v=[...l.value.slice(0,d),{...l.value[d],value:!l.value[d].value},...l.value.slice(d+1)];e("update:optionSettings",v)}return(d,v)=>(V(),j(qe,null,[l.value.length===0?(V(),Me(kl,{key:0,color:"green",size:"2em"})):Te("",!0),(V(!0),j(qe,null,Je(l.value,(k,S)=>(V(),Me(Tt,{key:S,selected:k.value,color:k.value?"light-green":"green",icon:k.icon,"icon-selected":k.icon,"text-color":"white",onClick:s=>y(S)},{default:ae(()=>[Ze(Gt(k.label),1)]),_:2},1032,["selected","color","icon","icon-selected","onClick"]))),128))],64))}},Sl={class:"notes column flex-center"},Cl={class:"row flex-center q-gutter-md q-pb-md"},wl={class:"search"},Ml={class:"q-pa-md column q-gutter-y-md"},Tl={class:"q-gutter-y-sm"},ql={class:"column flex-center filter-option--distance"},$l={class:"column flex-center filter-option"},Ll={class:"row"},Bl={class:"column flex-center filter-option"},_l={class:"row"},El={class:"row justify-end"},Nl={key:1,class:"text-grey-8"},Fl={class:"row flex-center q-gutter-lg"},Pl={__name:"NotesView",setup(t){const a=Zt(),o=el(),l=L(!0),e=L(!1),h=L(""),i=L([]),f=L(5),y=r(()=>{switch(f.value){case 1:return"100 公尺";case 2:return"300 公尺";case 3:return"500 公尺";case 4:return"1 公里";default:return"所有距離"}}),d=r(()=>[a.user.fullName].concat(o.targetUserNames)),v=L([]),k=r(()=>{let u=[...a.notesSortedByDistance];h.value&&(u=[...u].filter(p=>p.storeName.includes(h.value))),f.value&&(u=[...u].filter(p=>{const M=tl(a.userLocation.lat,a.userLocation.lng,p.location.lat,p.location.lng);switch(f.value){case 1:return M<101;case 2:return M<301;case 3:return M<501;case 4:return M<1001;default:return!0}}));const c=i.value.filter(p=>p.value===!0).map(p=>p.name);c.length>0&&(u=[...u].filter(p=>c.includes(p.city)));const m=v.value.filter(p=>p.value===!0).map(p=>p.name);return m.length>0&&(u=[...u].filter(p=>{if(p.user===a.user.ID)return m.includes(a.user.fullName);const M=o.targetUserList.find(x=>x.user===p.user);return m.includes(M.name)})),u}),S=L([{name:"total",icon:"star",label:"總分",value:!1},{name:"food",icon:"lunch_dining",label:"餐點",value:!1},{name:"service",icon:"restaurant",label:"服務",value:!1}]),s=r(()=>{const u=S.value.find(c=>c.value);if(u){if(u.name==="total")return[...k.value].sort((c,m)=>{const p=c.foodScore+c.serviceScore;return m.foodScore+m.serviceScore-p});if(u.name==="food")return[...k.value].sort((c,m)=>m.foodScore-c.foodScore);if(u.name==="service")return[...k.value].sort((c,m)=>m.serviceScore-c.serviceScore)}return k.value});return setTimeout(()=>{l.value=!1},3e3),(u,c)=>(V(),j("div",Sl,[q("div",Cl,[q("div",wl,[P(Mt,{class:"search__input",outlined:"",dense:"",placeholder:"以店名搜尋",color:"green",modelValue:h.value,"onUpdate:modelValue":c[0]||(c[0]=m=>h.value=m)},null,8,["modelValue"]),P(Re,{icon:"tune",round:"",flat:"",color:"green"},{default:ae(()=>[P(xl,{modelValue:e.value,"onUpdate:modelValue":c[6]||(c[6]=m=>e.value=m),anchor:"bottom right",self:"top right"},{default:ae(()=>[q("div",Ml,[q("div",null,[c[9]||(c[9]=q("div",{class:"text-md text-grey-8 q-mb-sm"},"選擇排序方式",-1)),P(Ce,{isOnlyOneSelected:!0,settings:S.value,"onUpdate:optionSettings":c[1]||(c[1]=m=>S.value=m)},null,8,["settings"])]),P(qt),q("div",null,[c[13]||(c[13]=q("div",{class:"text-md text-grey-8 q-mb-md"},"選擇篩選方式",-1)),q("div",Tl,[q("div",ql,[c[10]||(c[10]=q("div",{class:"text-md text-grey-8 q-mb-sm"},"依距離",-1)),P(ul,{modelValue:f.value,"onUpdate:modelValue":c[2]||(c[2]=m=>f.value=m),color:"green",markers:"",snap:"",label:"","label-always":"","label-value":y.value,min:1,max:5,step:1},null,8,["modelValue","label-value"])]),q("div",$l,[c[11]||(c[11]=q("div",{class:"text-md text-grey-8 q-mb-sm"},"依城市",-1)),q("div",Ll,[P(Ce,{options:ke(a).uniqueCities,settings:i.value,"onUpdate:optionSettings":c[3]||(c[3]=m=>i.value=m)},null,8,["options","settings"])])]),q("div",Bl,[c[12]||(c[12]=q("div",{class:"text-md text-grey-8 q-mb-sm"},"依作者",-1)),q("div",_l,[P(Ce,{options:d.value,settings:v.value,"onUpdate:optionSettings":c[4]||(c[4]=m=>v.value=m)},null,8,["options","settings"])])])])]),q("div",El,[P(Re,{flat:"",size:"md","text-color":"green",onClick:c[5]||(c[5]=m=>e.value=!1)},{default:ae(()=>c[14]||(c[14]=[Ze("確定")])),_:1})])])]),_:1},8,["modelValue"])]),_:1})])]),l.value&&s.value.length===0?(V(),Me(ll,{key:0,color:"brown",size:"2em"})):Te("",!0),!l.value&&s.value.length===0?(V(),j("div",Nl," 還沒有筆記喔！ ")):Te("",!0),q("div",Fl,[(V(!0),j(qe,null,Je(s.value,(m,p)=>(V(),j("div",{class:"note",key:m.id+m.user},[P($t,{noteInput:s.value[p],"onUpdate:note":c[7]||(c[7]=M=>ke(a).updateNote(M)),"onDelete:note":c[8]||(c[8]=M=>ke(a).deleteNote(M))},null,8,["noteInput"])]))),128))])]))}},Rl=Jt(Pl,[["__scopeId","data-v-c011882a"]]);export{Rl as default};
