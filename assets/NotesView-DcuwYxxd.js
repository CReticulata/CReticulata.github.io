import{u as mt,a as gt,b as ht,p as Pe,c as bt,d as pt,e as xt,f as yt,r as Ve,g as kt,h as Ct,i as St,j as wt,Q as Mt}from"./QDialog-C_sZipVs.js";import{Q as Tt,a as qt,N as $t}from"./Note-DkENMiXS.js";import{u as Ue,g as ie,a as Xe,r as M,c as s,i as Lt,b as ye,T as Bt,o as se,d as Q,p as Ye,h as S,e as _t,f as $e,w as W,s as Ge,j as He,k as Et,l as ze,n as Nt,m as Ft,q as Pt,t as Vt,v as Se,x as Ht,y as zt,z as At,A as Rt,B as Wt,C as Dt,D as It,E as Ot,F as Qt,G as jt,H as Kt,I as Ut,J as Xt,K as Yt,L as j,M as V,N as we,O as Me,P as Te,Q as Je,R as ae,S as Ze,U as Gt,_ as Jt,V as Zt,W as el,X as $,Y as P,Z as Ae,$ as ke}from"./index-C-bEpD6O.js";import{Q as tl}from"./QSpinnerTail-DFmwA6Wd.js";const Re="q-slider__marker-labels",ll=t=>({value:t}),nl=({marker:t})=>S("div",{key:t.value,style:t.style,class:t.classes},t.label),et=[34,37,40,33,39,38],al={...Ue,...mt,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},ol=["pan","update:modelValue","change"];function rl({updateValue:t,updatePosition:o,getDragging:r,formAttrs:l}){const{props:e,emit:g,slots:u,proxy:{$q:f}}=ie(),p=Xe(e,f),c=gt(l),d=M(!1),h=M(!1),i=M(!1),a=M(!1),v=s(()=>e.vertical===!0?"--v":"--h"),_=s(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),L=s(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(f.lang.rtl===!0)),B=s(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),N=s(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),x=s(()=>e.disable!==!0&&e.readonly!==!0&&B.value<N.value),w=s(()=>{if(e.step===0)return m=>m;const n=(String(e.step).trim().split(".")[1]||"").length;return m=>parseFloat(m.toFixed(n))}),y=s(()=>e.step===0?1:e.step),H=s(()=>x.value===!0?e.tabindex||0:-1),T=s(()=>e.max-e.min),F=s(()=>N.value-B.value),E=s(()=>Z(B.value)),I=s(()=>Z(N.value)),A=s(()=>e.vertical===!0?L.value===!0?"bottom":"top":L.value===!0?"right":"left"),ee=s(()=>e.vertical===!0?"height":"width"),K=s(()=>e.vertical===!0?"width":"height"),U=s(()=>e.vertical===!0?"vertical":"horizontal"),ue=s(()=>{const n={role:"slider","aria-valuemin":B.value,"aria-valuemax":N.value,"aria-orientation":U.value,"data-step":e.step};return e.disable===!0?n["aria-disabled"]="true":e.readonly===!0&&(n["aria-readonly"]="true"),n}),ce=s(()=>`q-slider q-slider${v.value} q-slider--${d.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(x.value===!0?" q-slider--editable":""))+(i.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(p.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+v.value:""));function O(n){const m="q-slider__"+n;return`${m} ${m}${v.value} ${m}${v.value}${_.value}`}function X(n){const m="q-slider__"+n;return`${m} ${m}${v.value}`}const Y=s(()=>{const n=e.selectionColor||e.color;return"q-slider__selection absolute"+(n!==void 0?` text-${n}`:"")}),de=s(()=>X("markers")+" absolute overflow-hidden"),ve=s(()=>X("track-container")),te=s(()=>O("pin")),le=s(()=>O("label")),fe=s(()=>O("text-container")),ne=s(()=>O("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),G=s(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),R=s(()=>{const n={[K.value]:e.trackSize};return e.trackImg!==void 0&&(n.backgroundImage=`url(${e.trackImg}) !important`),n}),me=s(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),b=s(()=>{const n=I.value-E.value,m={[A.value]:`${100*E.value}%`,[ee.value]:n===0?"2px":`${100*n}%`};return e.innerTrackImg!==void 0&&(m.backgroundImage=`url(${e.innerTrackImg}) !important`),m});function J(n){const{min:m,max:k,step:C}=e;let q=m+n*(k-m);if(C>0){const z=(q-B.value)%C;q+=(Math.abs(z)>=C/2?(z<0?-1:1)*C:0)-z}return q=w.value(q),Q(q,B.value,N.value)}function Z(n){return T.value===0?0:(n-e.min)/T.value}function ge(n,m){const k=Ye(n),C=e.vertical===!0?Q((k.top-m.top)/m.height,0,1):Q((k.left-m.left)/m.width,0,1);return Q(L.value===!0?1-C:C,E.value,I.value)}const Le=s(()=>Lt(e.markers)===!0?e.markers:y.value),Be=s(()=>{const n=[],m=Le.value,k=e.max;let C=e.min;do n.push(C),C+=m;while(C<k);return n.push(k),n}),_e=s(()=>{const n=` ${Re}${v.value}-`;return Re+`${n}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${n}${L.value===!0?"rtl":"ltr"}`}),he=s(()=>e.markerLabels===!1?null:nt(e.markerLabels).map((n,m)=>({index:m,value:n.value,label:n.label||n.value,classes:_e.value+(n.classes!==void 0?" "+n.classes:""),style:{...Ne(n.value),...n.style||{}}}))),Ee=s(()=>({markerList:he.value,markerMap:at.value,classes:_e.value,getStyle:Ne})),lt=s(()=>{const n=F.value===0?"2px":100*Le.value/F.value;return{...b.value,backgroundSize:e.vertical===!0?`2px ${n}%`:`${n}% 2px`}});function nt(n){if(n===!1)return null;if(n===!0)return Be.value.map(ll);if(typeof n=="function")return Be.value.map(k=>{const C=n(k);return ye(C)===!0?{...C,value:k}:{value:k,label:C}});const m=({value:k})=>k>=e.min&&k<=e.max;return Array.isArray(n)===!0?n.map(k=>ye(k)===!0?k:{value:k}).filter(m):Object.keys(n).map(k=>{const C=n[k],q=Number(k);return ye(C)===!0?{...C,value:q}:{value:q,label:C}}).filter(m)}function Ne(n){return{[A.value]:`${100*(n-e.min)/T.value}%`}}const at=s(()=>{if(e.markerLabels===!1)return null;const n={};return he.value.forEach(m=>{n[m.value]=m}),n});function ot(){if(u["marker-label-group"]!==void 0)return u["marker-label-group"](Ee.value);const n=u["marker-label"]||nl;return he.value.map(m=>n({marker:m,...Ee.value}))}const rt=s(()=>[[Bt,it,void 0,{[U.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function it(n){n.isFinal===!0?(a.value!==void 0&&(o(n.evt),n.touch===!0&&t(!0),a.value=void 0,g("pan","end")),d.value=!1,i.value=!1):n.isFirst===!0?(a.value=r(n.evt),o(n.evt),t(),d.value=!0,g("pan","start")):(o(n.evt),t())}function Fe(){i.value=!1}function st(n){o(n,r(n)),t(),h.value=!0,d.value=!0,document.addEventListener("mouseup",be,!0)}function be(){h.value=!1,d.value=!1,t(!0),Fe(),document.removeEventListener("mouseup",be,!0)}function ut(n){o(n,r(n)),t(!0)}function ct(n){et.includes(n.keyCode)&&t(!0)}function dt(n){if(e.vertical===!0)return null;const m=f.lang.rtl!==e.reverse?1-n:n;return{transform:`translateX(calc(${2*m-1} * ${e.thumbSize} / 2 + ${50-100*m}%))`}}function vt(n){const m=s(()=>h.value===!1&&(i.value===n.focusValue||i.value==="both")?" q-slider--focus":""),k=s(()=>`q-slider__thumb q-slider__thumb${v.value} q-slider__thumb${v.value}-${L.value===!0?"rtl":"ltr"} absolute non-selectable`+m.value+(n.thumbColor.value!==void 0?` text-${n.thumbColor.value}`:"")),C=s(()=>({width:e.thumbSize,height:e.thumbSize,[A.value]:`${100*n.ratio.value}%`,zIndex:i.value===n.focusValue?2:void 0})),q=s(()=>n.labelColor.value!==void 0?` text-${n.labelColor.value}`:""),z=s(()=>dt(n.ratio.value)),pe=s(()=>"q-slider__text"+(n.labelTextColor.value!==void 0?` text-${n.labelTextColor.value}`:""));return()=>{const xe=[S("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[S("path",{d:e.thumbPath})]),S("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(xe.push(S("div",{class:te.value+" absolute fit no-pointer-events"+q.value},[S("div",{class:le.value,style:{minWidth:e.thumbSize}},[S("div",{class:fe.value,style:z.value},[S("span",{class:pe.value},n.label.value)])])])),e.name!==void 0&&e.disable!==!0&&c(xe,"push")),S("div",{class:k.value,style:C.value,...n.getNodeData()},xe)}}function ft(n,m,k,C){const q=[];e.innerTrackColor!=="transparent"&&q.push(S("div",{key:"inner",class:me.value,style:b.value})),e.selectionColor!=="transparent"&&q.push(S("div",{key:"selection",class:Y.value,style:n.value})),e.markers!==!1&&q.push(S("div",{key:"marker",class:de.value,style:lt.value})),C(q);const z=[_t("div",{key:"trackC",class:ve.value,tabindex:m.value,...k.value},[S("div",{class:G.value,style:R.value},q)],"slide",x.value,()=>rt.value)];if(e.markerLabels!==!1){const pe=e.switchMarkerLabelsSide===!0?"unshift":"push";z[pe](S("div",{key:"markerL",class:ne.value},ot()))}return z}return se(()=>{document.removeEventListener("mouseup",be,!0)}),{state:{active:d,focus:i,preventFocus:h,dragging:a,editable:x,classes:ce,tabindex:H,attributes:ue,roundValueFn:w,keyStep:y,trackLen:T,innerMin:B,innerMinRatio:E,innerMax:N,innerMaxRatio:I,positionProp:A,sizeProp:ee,isReversed:L},methods:{onActivate:st,onMobileClick:ut,onBlur:Fe,onKeyup:ct,getContent:ft,getThumbRenderFn:vt,convertRatioToModel:J,convertModelToRatio:Z,getDraggingRatio:ge}}}const il=()=>({}),sl=$e({name:"QSlider",props:{...al,modelValue:{required:!0,default:null,validator:t=>typeof t=="number"||t===null},labelValue:[String,Number]},emits:ol,setup(t,{emit:o}){const{proxy:{$q:r}}=ie(),{state:l,methods:e}=rl({updateValue:v,updatePosition:L,getDragging:_,formAttrs:ht(t)}),g=M(null),u=M(0),f=M(0);function p(){f.value=t.modelValue===null?l.innerMin.value:Q(t.modelValue,l.innerMin.value,l.innerMax.value)}W(()=>`${t.modelValue}|${l.innerMin.value}|${l.innerMax.value}`,p),p();const c=s(()=>e.convertModelToRatio(f.value)),d=s(()=>l.active.value===!0?u.value:c.value),h=s(()=>{const x={[l.positionProp.value]:`${100*l.innerMinRatio.value}%`,[l.sizeProp.value]:`${100*(d.value-l.innerMinRatio.value)}%`};return t.selectionImg!==void 0&&(x.backgroundImage=`url(${t.selectionImg}) !important`),x}),i=e.getThumbRenderFn({focusValue:!0,getNodeData:il,ratio:d,label:s(()=>t.labelValue!==void 0?t.labelValue:f.value),thumbColor:s(()=>t.thumbColor||t.color),labelColor:s(()=>t.labelColor),labelTextColor:s(()=>t.labelTextColor)}),a=s(()=>l.editable.value!==!0?{}:r.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:B,onBlur:e.onBlur,onKeydown:N,onKeyup:e.onKeyup});function v(x){f.value!==t.modelValue&&o("update:modelValue",f.value),x===!0&&o("change",f.value)}function _(){return g.value.getBoundingClientRect()}function L(x,w=l.dragging.value){const y=e.getDraggingRatio(x,w);f.value=e.convertRatioToModel(y),u.value=t.snap!==!0||t.step===0?y:e.convertModelToRatio(f.value)}function B(){l.focus.value=!0}function N(x){if(et.includes(x.keyCode)===!1)return;Ge(x);const w=([34,33].includes(x.keyCode)?10:1)*l.keyStep.value,y=([34,37,40].includes(x.keyCode)?-1:1)*(l.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*w;f.value=Q(l.roundValueFn.value(f.value+y),l.innerMin.value,l.innerMax.value),v()}return()=>{const x=e.getContent(h,l.tabindex,a,w=>{w.push(i())});return S("div",{ref:g,class:l.classes.value+(t.modelValue===null?" q-slider--no-value":""),...l.attributes.value,"aria-valuenow":t.modelValue},x)}}}),ul={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},cl={...ul,contextMenu:Boolean};function dl({showing:t,avoidEmit:o,configureAnchorEl:r}){const{props:l,proxy:e,emit:g}=ie(),u=M(null);let f=null;function p(a){return u.value===null?!1:a===void 0||a.touches===void 0||a.touches.length<=1}const c={};r===void 0&&(Object.assign(c,{hide(a){e.hide(a)},toggle(a){e.toggle(a),a.qAnchorHandled=!0},toggleKey(a){Ft(a,13)===!0&&c.toggle(a)},contextClick(a){e.hide(a),He(a),Nt(()=>{e.show(a),a.qAnchorHandled=!0})},prevent:He,mobileTouch(a){if(c.mobileCleanup(a),p(a)!==!0)return;e.hide(a),u.value.classList.add("non-selectable");const v=a.target;ze(c,"anchor",[[v,"touchmove","mobileCleanup","passive"],[v,"touchend","mobileCleanup","passive"],[v,"touchcancel","mobileCleanup","passive"],[u.value,"contextmenu","prevent","notPassive"]]),f=setTimeout(()=>{f=null,e.show(a),a.qAnchorHandled=!0},300)},mobileCleanup(a){u.value.classList.remove("non-selectable"),f!==null&&(clearTimeout(f),f=null),t.value===!0&&a!==void 0&&Et()}}),r=function(a=l.contextMenu){if(l.noParentEvent===!0||u.value===null)return;let v;a===!0?e.$q.platform.is.mobile===!0?v=[[u.value,"touchstart","mobileTouch","passive"]]:v=[[u.value,"mousedown","hide","passive"],[u.value,"contextmenu","contextClick","notPassive"]]:v=[[u.value,"click","toggle","passive"],[u.value,"keyup","toggleKey","passive"]],ze(c,"anchor",v)});function d(){Vt(c,"anchor")}function h(a){for(u.value=a;u.value.classList.contains("q-anchor--skip");)u.value=u.value.parentNode;r()}function i(){if(l.target===!1||l.target===""||e.$el.parentNode===null)u.value=null;else if(l.target===!0)h(e.$el.parentNode);else{let a=l.target;if(typeof l.target=="string")try{a=document.querySelector(l.target)}catch{a=void 0}a!=null?(u.value=a.$el||a,r()):(u.value=null,console.error(`Anchor: target "${l.target}" not found`))}}return W(()=>l.contextMenu,a=>{u.value!==null&&(d(),r(a))}),W(()=>l.target,()=>{u.value!==null&&d(),i()}),W(()=>l.noParentEvent,a=>{u.value!==null&&(a===!0?d():r())}),Pt(()=>{i(),o!==!0&&l.modelValue===!0&&u.value===null&&g("update:modelValue",!1)}),se(()=>{f!==null&&clearTimeout(f),d()}),{anchorEl:u,canShow:p,anchorEvents:c}}function vl(t,o){const r=M(null);let l;function e(f,p){const c=`${p!==void 0?"add":"remove"}EventListener`,d=p!==void 0?p:l;f!==window&&f[c]("scroll",d,Se.passive),window[c]("scroll",d,Se.passive),l=p}function g(){r.value!==null&&(e(r.value),r.value=null)}const u=W(()=>t.noParentEvent,()=>{r.value!==null&&(g(),o())});return se(u),{localScrollTarget:r,unconfigureScrollTarget:g,changeScrollEvent:e}}const{notPassiveCapture:oe}=Se,D=[];function re(t){const o=t.target;if(o===void 0||o.nodeType===8||o.classList.contains("no-pointer-events")===!0)return;let r=Pe.length-1;for(;r>=0;){const l=Pe[r].$;if(l.type.name==="QTooltip"){r--;continue}if(l.type.name!=="QDialog")break;if(l.props.seamless!==!0)return;r--}for(let l=D.length-1;l>=0;l--){const e=D[l];if((e.anchorEl.value===null||e.anchorEl.value.contains(o)===!1)&&(o===document.body||e.innerRef.value!==null&&e.innerRef.value.contains(o)===!1))t.qClickOutside=!0,e.onClickOutside(t);else return}}function fl(t){D.push(t),D.length===1&&(document.addEventListener("mousedown",re,oe),document.addEventListener("touchstart",re,oe))}function We(t){const o=D.findIndex(r=>r===t);o!==-1&&(D.splice(o,1),D.length===0&&(document.removeEventListener("mousedown",re,oe),document.removeEventListener("touchstart",re,oe)))}let De,Ie;function Oe(t){const o=t.split(" ");return o.length!==2?!1:["top","center","bottom"].includes(o[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(o[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function ml(t){return t?!(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number"):!0}const qe={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(t=>{qe[`${t}#ltr`]=t,qe[`${t}#rtl`]=t});function Qe(t,o){const r=t.split(" ");return{vertical:r[0],horizontal:qe[`${r[1]}#${o===!0?"rtl":"ltr"}`]}}function gl(t,o){let{top:r,left:l,right:e,bottom:g,width:u,height:f}=t.getBoundingClientRect();return o!==void 0&&(r-=o[1],l-=o[0],g+=o[1],e+=o[0],u+=o[0],f+=o[1]),{top:r,bottom:g,height:f,left:l,right:e,width:u,middle:l+(e-l)/2,center:r+(g-r)/2}}function hl(t,o,r){let{top:l,left:e}=t.getBoundingClientRect();return l+=o.top,e+=o.left,r!==void 0&&(l+=r[1],e+=r[0]),{top:l,bottom:l+1,height:1,left:e,right:e+1,width:1,middle:e,center:l}}function bl(t,o){return{top:0,center:o/2,bottom:o,left:0,middle:t/2,right:t}}function je(t,o,r,l){return{top:t[r.vertical]-o[l.vertical],left:t[r.horizontal]-o[l.horizontal]}}function tt(t,o=0){if(t.targetEl===null||t.anchorEl===null||o>5)return;if(t.targetEl.offsetHeight===0||t.targetEl.offsetWidth===0){setTimeout(()=>{tt(t,o+1)},10);return}const{targetEl:r,offset:l,anchorEl:e,anchorOrigin:g,selfOrigin:u,absoluteOffset:f,fit:p,cover:c,maxHeight:d,maxWidth:h}=t;if(Ht.is.ios===!0&&window.visualViewport!==void 0){const H=document.body.style,{offsetLeft:T,offsetTop:F}=window.visualViewport;T!==De&&(H.setProperty("--q-pe-left",T+"px"),De=T),F!==Ie&&(H.setProperty("--q-pe-top",F+"px"),Ie=F)}const{scrollLeft:i,scrollTop:a}=r,v=f===void 0?gl(e,c===!0?[0,0]:l):hl(e,f,l);Object.assign(r.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:h,maxHeight:d,visibility:"visible"});const{offsetWidth:_,offsetHeight:L}=r,{elWidth:B,elHeight:N}=p===!0||c===!0?{elWidth:Math.max(v.width,_),elHeight:c===!0?Math.max(v.height,L):L}:{elWidth:_,elHeight:L};let x={maxWidth:h,maxHeight:d};(p===!0||c===!0)&&(x.minWidth=v.width+"px",c===!0&&(x.minHeight=v.height+"px")),Object.assign(r.style,x);const w=bl(B,N);let y=je(v,w,g,u);if(f===void 0||l===void 0)Ce(y,v,w,g,u);else{const{top:H,left:T}=y;Ce(y,v,w,g,u);let F=!1;if(y.top!==H){F=!0;const E=2*l[1];v.center=v.top-=E,v.bottom-=E+2}if(y.left!==T){F=!0;const E=2*l[0];v.middle=v.left-=E,v.right-=E+2}F===!0&&(y=je(v,w,g,u),Ce(y,v,w,g,u))}x={top:y.top+"px",left:y.left+"px"},y.maxHeight!==void 0&&(x.maxHeight=y.maxHeight+"px",v.height>y.maxHeight&&(x.minHeight=x.maxHeight)),y.maxWidth!==void 0&&(x.maxWidth=y.maxWidth+"px",v.width>y.maxWidth&&(x.minWidth=x.maxWidth)),Object.assign(r.style,x),r.scrollTop!==a&&(r.scrollTop=a),r.scrollLeft!==i&&(r.scrollLeft=i)}function Ce(t,o,r,l,e){const g=r.bottom,u=r.right,f=zt(),p=window.innerHeight-f,c=document.body.clientWidth;if(t.top<0||t.top+g>p)if(e.vertical==="center")t.top=o[l.vertical]>p/2?Math.max(0,p-g):0,t.maxHeight=Math.min(g,p);else if(o[l.vertical]>p/2){const d=Math.min(p,l.vertical==="center"?o.center:l.vertical===e.vertical?o.bottom:o.top);t.maxHeight=Math.min(g,d),t.top=Math.max(0,d-g)}else t.top=Math.max(0,l.vertical==="center"?o.center:l.vertical===e.vertical?o.top:o.bottom),t.maxHeight=Math.min(g,p-t.top);if(t.left<0||t.left+u>c)if(t.maxWidth=Math.min(u,c),e.horizontal==="middle")t.left=o[l.horizontal]>c/2?Math.max(0,c-u):0;else if(o[l.horizontal]>c/2){const d=Math.min(c,l.horizontal==="middle"?o.middle:l.horizontal===e.horizontal?o.right:o.left);t.maxWidth=Math.min(u,d),t.left=Math.max(0,d-t.maxWidth)}else t.left=Math.max(0,l.horizontal==="middle"?o.middle:l.horizontal===e.horizontal?o.left:o.right),t.maxWidth=Math.min(u,c-t.left)}const pl=$e({name:"QMenu",inheritAttrs:!1,props:{...cl,...Wt,...Ue,...bt,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Oe},self:{type:String,validator:Oe},offset:{type:Array,validator:ml},scrollTarget:Rt,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...At,"click","escapeKey"],setup(t,{slots:o,emit:r,attrs:l}){let e=null,g,u,f;const p=ie(),{proxy:c}=p,{$q:d}=c,h=M(null),i=M(!1),a=s(()=>t.persistent!==!0&&t.noRouteDismiss!==!0),v=Xe(t,d),{registerTick:_,removeTick:L}=Dt(),{registerTimeout:B}=It(),{transitionProps:N,transitionStyle:x}=pt(t),{localScrollTarget:w,changeScrollEvent:y,unconfigureScrollTarget:H}=vl(t,le),{anchorEl:T,canShow:F}=dl({showing:i}),{hide:E}=Ot({showing:i,canShow:F,handleShow:de,handleHide:ve,hideOnRouteChange:a,processOnMount:!0}),{showPortal:I,hidePortal:A,renderPortal:ee}=xt(p,h,me,"menu"),K={anchorEl:T,innerRef:h,onClickOutside(b){if(t.persistent!==!0&&i.value===!0)return E(b),(b.type==="touchstart"||b.target.classList.contains("q-dialog__backdrop"))&&Ge(b),!0}},U=s(()=>Qe(t.anchor||(t.cover===!0?"center middle":"bottom start"),d.lang.rtl)),ue=s(()=>t.cover===!0?U.value:Qe(t.self||"top start",d.lang.rtl)),ce=s(()=>(t.square===!0?" q-menu--square":"")+(v.value===!0?" q-menu--dark q-dark":"")),O=s(()=>t.autoClose===!0?{onClick:fe}:{}),X=s(()=>i.value===!0&&t.persistent!==!0);W(X,b=>{b===!0?(yt(G),fl(K)):(Ve(G),We(K))});function Y(){wt(()=>{let b=h.value;b&&b.contains(document.activeElement)!==!0&&(b=b.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||b.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||b.querySelector("[autofocus], [data-autofocus]")||b,b.focus({preventScroll:!0}))})}function de(b){if(e=t.noRefocus===!1?document.activeElement:null,kt(ne),I(),le(),g=void 0,b!==void 0&&(t.touchPosition||t.contextMenu)){const J=Ye(b);if(J.left!==void 0){const{top:Z,left:ge}=T.value.getBoundingClientRect();g={left:J.left-ge,top:J.top-Z}}}u===void 0&&(u=W(()=>d.screen.width+"|"+d.screen.height+"|"+t.self+"|"+t.anchor+"|"+d.lang.rtl,R)),t.noFocus!==!0&&document.activeElement.blur(),_(()=>{R(),t.noFocus!==!0&&Y()}),B(()=>{d.platform.is.ios===!0&&(f=t.autoClose,h.value.click()),R(),I(!0),r("show",b)},t.transitionDuration)}function ve(b){L(),A(),te(!0),e!==null&&(b===void 0||b.qClickOutside!==!0)&&(((b&&b.type.indexOf("key")===0?e.closest('[tabindex]:not([tabindex^="-"])'):void 0)||e).focus(),e=null),B(()=>{A(!0),r("hide",b)},t.transitionDuration)}function te(b){g=void 0,u!==void 0&&(u(),u=void 0),(b===!0||i.value===!0)&&(Ct(ne),H(),We(K),Ve(G)),b!==!0&&(e=null)}function le(){(T.value!==null||t.scrollTarget!==void 0)&&(w.value=Qt(T.value,t.scrollTarget),y(w.value,R))}function fe(b){f!==!0?(St(c,b),r("click",b)):f=!1}function ne(b){X.value===!0&&t.noFocus!==!0&&Ut(h.value,b.target)!==!0&&Y()}function G(b){r("escapeKey"),E(b)}function R(){tt({targetEl:h.value,offset:t.offset,anchorEl:T.value,anchorOrigin:U.value,selfOrigin:ue.value,absoluteOffset:g,fit:t.fit,cover:t.cover,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function me(){return S(Kt,N.value,()=>i.value===!0?S("div",{role:"menu",...l,ref:h,tabindex:-1,class:["q-menu q-position-engine scroll"+ce.value,l.class],style:[l.style,x.value],...O.value},jt(o.default)):null)}return se(te),Object.assign(c,{focus:Y,updatePosition:R}),ee}}),xl='<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',yl=$e({name:"QSpinnerDots",props:Xt,setup(t){const{cSize:o,classes:r}=Yt(t);return()=>S("svg",{class:r.value,fill:"currentColor",width:o.value,height:o.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:xl})}}),Ke={__name:"SettingOptions",props:{isOnlyOneSelected:{type:Boolean,default:!1},options:{type:Array,default:[]},settings:{type:Array,default:[]}},emits:["update:optionSettings"],setup(t,{emit:o}){const r=t,l=s(()=>r.settings.length!==0?r.settings:g(r.options)),e=o;function g(c){return c.map(d=>({name:d,label:d,value:!1}))}function u(c){return c.map(d=>({...d,value:!1}))}function f(c){const d=u(l.value);return[...d.slice(0,c),{...l.value[c],value:!l.value[c].value},...d.slice(c+1)]}function p(c){if(r.isOnlyOneSelected)return e("update:optionSettings",f(c));const d=[...l.value.slice(0,c),{...l.value[c],value:!l.value[c].value},...l.value.slice(c+1)];e("update:optionSettings",d)}return(c,d)=>(V(),j(Te,null,[l.value.length===0?(V(),we(yl,{key:0,color:"green",size:"2em"})):Me("",!0),(V(!0),j(Te,null,Je(l.value,(h,i)=>(V(),we(Tt,{key:i,selected:h.value,color:h.value?"light-green":"green",icon:h.icon,"icon-selected":h.icon,"text-color":"white",onClick:a=>p(i)},{default:ae(()=>[Ze(Gt(h.label),1)]),_:2},1032,["selected","color","icon","icon-selected","onClick"]))),128))],64))}},kl={class:"notes column flex-center"},Cl={class:"row flex-center q-gutter-md q-pb-md"},Sl={class:"search"},wl={class:"q-pa-md column q-gutter-y-md"},Ml={class:"q-gutter-y-sm"},Tl={class:"column flex-center filter-option--distance"},ql={class:"column flex-center filter-option"},$l={class:"row"},Ll={class:"row justify-end"},Bl={key:1,class:"text-grey-8"},_l={class:"row flex-center q-gutter-lg"},El={__name:"NotesView",setup(t){const o=Zt(),r=M(!0),l=M(!1),e=M(""),g=M([]),u=M(5),f=s(()=>{switch(u.value){case 1:return"100 公尺";case 2:return"300 公尺";case 3:return"500 公尺";case 4:return"1 公里";default:return"所有距離"}}),p=s(()=>{let h=[...o.notesSortedByDistance];e.value&&(h=[...h].filter(a=>a.storeName.includes(e.value))),u.value&&(h=[...h].filter(a=>{const v=el(o.userLocation.lat,o.userLocation.lng,a.location.lat,a.location.lng);switch(u.value){case 1:return v<101;case 2:return v<301;case 3:return v<501;case 4:return v<1001;default:return!0}}));let i;return g.value&&(i=g.value.filter(a=>a.value===!0).map(a=>a.name),i.length>0&&(h=[...h].filter(a=>i.includes(a.city)))),h}),c=M([{name:"total",icon:"star",label:"總分",value:!1},{name:"food",icon:"lunch_dining",label:"餐點",value:!1},{name:"service",icon:"restaurant",label:"服務",value:!1}]),d=s(()=>{const h=c.value.find(i=>i.value);if(h){if(h.name==="total")return[...p.value].sort((i,a)=>{const v=i.foodScore+i.serviceScore;return a.foodScore+a.serviceScore-v});if(h.name==="food")return[...p.value].sort((i,a)=>a.foodScore-i.foodScore);if(h.name==="service")return[...p.value].sort((i,a)=>a.serviceScore-i.serviceScore)}return p.value});return setTimeout(()=>{r.value=!1},3e3),(h,i)=>(V(),j("div",kl,[$("div",Cl,[$("div",Sl,[P(Mt,{class:"search__input",outlined:"",dense:"",placeholder:"以店名搜尋",color:"green",modelValue:e.value,"onUpdate:modelValue":i[0]||(i[0]=a=>e.value=a)},null,8,["modelValue"]),P(Ae,{icon:"tune",round:"",flat:"",color:"green"},{default:ae(()=>[P(pl,{modelValue:l.value,"onUpdate:modelValue":i[5]||(i[5]=a=>l.value=a),anchor:"bottom right",self:"top right"},{default:ae(()=>[$("div",wl,[$("div",null,[i[8]||(i[8]=$("div",{class:"text-md text-grey-8 q-mb-sm"},"選擇排序方式",-1)),P(Ke,{isOnlyOneSelected:!0,settings:c.value,"onUpdate:optionSettings":i[1]||(i[1]=a=>c.value=a)},null,8,["settings"])]),P(qt),$("div",null,[i[11]||(i[11]=$("div",{class:"text-md text-grey-8 q-mb-md"},"選擇篩選方式",-1)),$("div",Ml,[$("div",Tl,[i[9]||(i[9]=$("div",{class:"text-md text-grey-8 q-mb-sm"},"依距離",-1)),P(sl,{modelValue:u.value,"onUpdate:modelValue":i[2]||(i[2]=a=>u.value=a),color:"green",markers:"",snap:"",label:"","label-always":"","label-value":f.value,min:1,max:5,step:1},null,8,["modelValue","label-value"])]),$("div",ql,[i[10]||(i[10]=$("div",{class:"text-md text-grey-8 q-mb-sm"},"依城市",-1)),$("div",$l,[P(Ke,{options:ke(o).uniqueCities,settings:g.value,"onUpdate:optionSettings":i[3]||(i[3]=a=>g.value=a)},null,8,["options","settings"])])])])]),$("div",Ll,[P(Ae,{flat:"",size:"md","text-color":"green",onClick:i[4]||(i[4]=a=>l.value=!1)},{default:ae(()=>i[12]||(i[12]=[Ze("確定")])),_:1})])])]),_:1},8,["modelValue"])]),_:1})])]),r.value&&d.value.length===0?(V(),we(tl,{key:0,color:"brown",size:"2em"})):Me("",!0),!r.value&&d.value.length===0?(V(),j("div",Bl," 還沒有筆記喔！ ")):Me("",!0),$("div",_l,[(V(!0),j(Te,null,Je(d.value,(a,v)=>(V(),j("div",{class:"note",key:a.id},[P($t,{noteInput:d.value[v],"onUpdate:note":i[6]||(i[6]=_=>ke(o).updateNote(_)),"onDelete:note":i[7]||(i[7]=_=>ke(o).deleteNote(_))},null,8,["noteInput"])]))),128))])]))}},Hl=Jt(El,[["__scopeId","data-v-82d9b9b0"]]);export{Hl as default};
